"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[184],{4184:function(e,n,t){t.r(n),t.d(n,{default:function(){return x}});var r,a,o,c=t(8152),u=t(168),i=t(2791),s=t(6871),p=t(3504),l=t(577),f=t(5751),h=t(8183),d=t(184),m=f.ZP.ul(r||(r=(0,u.Z)(["\n  display: flex;\n  flex-direction: column;\n  margin: 20px auto 0;\n  max-width: 300px;\n"]))),v=f.ZP.input(a||(a=(0,u.Z)(["\n  border-radius: 0 0.5rem 0.5rem 0;\n  height: 30px;\n  border: 1px solid grey;\n  outline: none;\n  :hover {\n    border: 1px solid blue;\n  }\n"]))),g=f.ZP.button(o||(o=(0,u.Z)(["\n  border-radius: 0.5rem 0 0 0.5rem;\n  height: 34px;\n  border: 1px solid grey;\n  background-color: grey;\n  cursor: pointer;\n  color: white;\n  font-weight: 500;\n  :hover {\n    background-color: white;\n    color: grey;\n  }\n"])));function x(){var e,n=(0,i.useState)(""),t=(0,c.Z)(n,2),r=t[0],a=t[1],o=(0,i.useState)(null),u=(0,c.Z)(o,2),f=u[0],x=u[1],b=(0,s.s0)(),w=(0,s.TH)().search,y=null===(e=new URLSearchParams(w))||void 0===e?void 0:e.get("query");return(0,i.useEffect)((function(){r||r===y||(y?((0,h.qF)(y).then((function(e){x(e)})).catch((function(e){console.log(e)})),a("")):x(null))}),[y,r]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),""===r.trim())return l.Am.error("Empty input");(0,h.qF)(r).then((function(e){x(e),b("/movies?query=".concat(r))})).catch((function(e){console.log(e)})),a("")},children:[(0,d.jsx)(g,{type:"submit",children:"Search"}),(0,d.jsx)(v,{type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search movies",onChange:function(e){var n=e.target.value.toLowerCase();a(n)}})]}),(null===f||void 0===f?void 0:f.length)>0&&(0,d.jsx)(m,{children:f.map((function(e){var n=e.title,t=e.id;return(0,d.jsx)("li",{children:(0,d.jsx)(p.OL,{to:"/movies/".concat(t),children:n})},t)}))}),!f||0===(null===f||void 0===f?void 0:f.length)&&(0,d.jsx)("p",{children:"No movies found"})]})}},8183:function(e,n,t){t.d(n,{Hg:function(){return l},qF:function(){return f},Pg:function(){return h},gI:function(){return d},Xj:function(){return m}});var r=t(5861),a=t(7757),o=t.n(a),c=t(4569),u=t.n(c),i="https://api.themoviedb.org/3",s="aa799e6d0297de166f5b00a47e312b46",p="https://critics.io/img/movies/poster-placeholder.png",l=function(){var e=(0,r.Z)(o().mark((function e(){var n,t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(i,"/trending/movie/day?api_key=").concat(s),e.next=3,u().get(n);case 3:return t=e.sent,e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=(0,r.Z)(o().mark((function e(n){var t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(i,"/search/movie?api_key=").concat(s,"&query=").concat(n,"&page=1&include_adult=false"),e.next=3,u().get(t);case 3:return r=e.sent,e.abrupt("return",r.data.results);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),h=function(){var e=(0,r.Z)(o().mark((function e(n){var t,r,a,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(i,"/movie/").concat(n,"?api_key=").concat(s),e.next=3,u().get(t);case 3:return r=e.sent,a=r.data,(c=v(a)).genres=c.genres.map((function(e){return e.name})),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),d=function(){var e=(0,r.Z)(o().mark((function e(n){var t,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(i,"/movie/").concat(n,"/credits?api_key=").concat(s),e.next=3,u().get(t);case 3:return r=e.sent,a=r.data.cast,e.abrupt("return",a.map(g));case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),m=function(){var e=(0,r.Z)(o().mark((function e(n){var t,r,a,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(i,"/movie/").concat(n,"/reviews?api_key=").concat(s),e.next=3,u().get(t);case 3:return r=e.sent,a=r.data.results,c=a.map((function(e){return{author:e.author,content:e.content}})),e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),v=function(e){var n=Object.assign({},e);return n.poster_path?n.poster_path="https://image.tmdb.org/t/p/w500"+n.poster_path:n.poster_path=p,n.release_year=n.release_date?n.release_date.slice(0,4):"Unknown",n.vote_average="".concat(10*n.vote_average,"%"),n},g=function(e){var n=e.original_name,t=e.profile_path,r={name:n,character:e.character};return r.path=t?"https://image.tmdb.org/t/p/w500"+t:p,r}}}]);
//# sourceMappingURL=184.9b6582a7.chunk.js.map